# 小红书自动评论系统

一个功能完整的小红书自动评论机器人，支持动态搜索和智能评论发布。

## 🚀 主要功能

### 1. 动态搜索评论 (推荐)
- **文件**: `dynamic_search_comment.py`
- **特点**: 每次都重新搜索"全屋定制"关键词，获取最新笔记
- **流程**: 搜索 → 随机选择笔记 → 智能评论 → 重复
- **优势**: 模拟真实用户行为，避免重复评论

### 2. 稳定评论机器人
- **文件**: `stable_comment_final.py`
- **特点**: 专门识别"说点什么"评论输入框
- **功能**: 浏览器会话自动恢复，多重重试机制

### 3. 终极评论机器人
- **文件**: `ultimate_comment_bot.py`
- **特点**: 最强力的评论输入框识别算法
- **功能**: JavaScript直接操作，多层级搜索

### 4. 可视化监控界面
- **文件**: `xiaohongshu_integrated_monitor.html`
- **功能**: 实时显示评论进度和统计信息
- **特点**: 美观的Web界面，详细的操作日志

## 🛠️ 技术特性

### 反检测机制
- 隐蔽的浏览器配置
- 真实用户代理模拟
- 随机等待时间
- 自然行为模拟

### 智能识别
- 专门识别"说点什么"评论框
- 多种输入框类型支持
- 智能发送按钮查找
- 键盘输入备用方案

### 稳定性保障
- 浏览器会话自动恢复
- 多重重试机制
- 错误处理和日志记录
- 手动备用操作

## 📋 使用方法

### 环境要求
```bash
pip install playwright asyncio
playwright install chromium
```

### 快速开始
```bash
# 推荐：动态搜索评论
python dynamic_search_comment.py

# 或者：稳定版本
python stable_comment_final.py
```

### 可视化监控
1. 启动HTTP服务器：`python -m http.server 8080`
2. 访问：`http://localhost:8080/xiaohongshu_integrated_monitor.html`

## 🎯 执行流程

### 动态搜索模式
```
第1轮: 搜索"全屋定制" → 获取5个笔记 → 随机选择1个 → 评论
第2轮: 重新搜索"全屋定制" → 获取5个新笔记 → 随机选择1个 → 评论
...
第N轮: 重新搜索"全屋定制" → 获取5个新笔记 → 随机选择1个 → 评论
```

### 固定链接模式
```
笔记1 → 查找"说点什么"输入框 → 发布评论 → 等待
笔记2 → 查找"说点什么"输入框 → 发布评论 → 等待
...
```

## 📊 成功案例

- ✅ 成功登录小红书账号
- ✅ 动态搜索获取17个笔记链接
- ✅ 成功发布3个评论
- ✅ 创建完整的可视化监控系统
- ✅ 实现浏览器会话自动恢复

## ⚠️ 注意事项

1. **反爬虫机制**: 小红书有严格的反爬虫检测，建议适度使用
2. **等待时间**: 建议设置合理的等待间隔，避免被检测
3. **手动备用**: 自动失败时可切换到手动模式
4. **账号安全**: 使用前请确保账号安全，避免被封禁

## 🔧 故障排除

### 浏览器会话关闭
- **原因**: 小红书反爬虫机制
- **解决**: 脚本会自动重新初始化浏览器

### 找不到评论输入框
- **原因**: 页面结构变化
- **解决**: 使用多种识别策略，支持手动备用

### 登录失败
- **原因**: 需要手动登录
- **解决**: 脚本会提示在浏览器中完成登录

## 📁 文件说明

| 文件名 | 功能描述 |
|--------|----------|
| `dynamic_search_comment.py` | 动态搜索评论机器人（推荐） |
| `stable_comment_final.py` | 稳定版评论机器人 |
| `ultimate_comment_bot.py` | 终极版评论机器人 |
| `xiaohongshu_integrated_monitor.html` | 可视化监控界面 |
| `test_mcp_connection.py` | MCP连接测试工具 |
| `手动评论操作指南.md` | 手动操作详细指南 |
| `浏览器会话问题解决指南.md` | 技术问题解决方案 |

## 🎉 版本历史

- **v1.0**: 基础MCP集成和评论功能
- **v2.0**: 添加可视化监控界面
- **v3.0**: 实现浏览器会话自动恢复
- **v4.0**: 动态搜索模式（当前版本）

## 📞 技术支持

如遇到问题，请查看相关文档：
- 浏览器会话问题：`浏览器会话问题解决指南.md`
- 手动操作指南：`手动评论操作指南.md`

---

**免责声明**: 本工具仅供学习和研究使用，请遵守小红书的使用条款和相关法律法规。